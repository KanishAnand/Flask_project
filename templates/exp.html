<html>
<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<link href="static/css/exp.css" rel="stylesheet">
<style>
.selected{
  background-color:  #FF0000;
}
.ans_output{
  background-color: #008000;
}
</style>
</head>
<body>
  <h1>INTEGER ARITHMETIC</h1>
  <button class="help">HELP</button>
  <script>
    var count = 0;
    var a=0,b=0;
    //var jj = {};
    $(function(){
      $('#usr_inp tr').on('click',function(){
          ++count;
          //console.log(typeof(this))
          $(this).addClass("selected");
          c=$(this).find('td:eq(1)').text();
          if(count % 2 == 1){
            if(count != 1){
              $(obj_1).removeClass("selected");
            }
            obj_1 = this;
            a=c;
          }
          else{
            if(count != 2){
              $(obj_2).removeClass("selected");
            }
            obj_2 = this
            b=c;
          }
          console.log(a);
          console.log(b);
          //alert("jksdf");
      });
    });

    $(function(){
      $("#button_reset").click(function(){
          console.log("FDK")
          location.reload();
        });
    });

    $(document).ready(function(){
        $("#button_add").click(function(){
          if(b == 0){
            alert("select two values");
            return;
          }
          var arr={
              var_1:a,
              var_2:b
          };
         // $("tr").removeClass("selected");
          $.ajax({
            url:"http://localhost:5000/calculate",
            type:'POST',
            data: JSON.stringify(arr),
            contentType: 'application/json; charset=utf-8',
            dataType:'json',
            success:function(res){
              console.log(res);
              table_display(res);
              ans_display(res);
              //console.log($.parseJSON(res));
            }
            //console.log(JSON.parse(jj))

            //async: true,
            //document.getElementById("demo").innerHTML = "kanish"
          });
        });
        //console.log($.parseJSON(jj));
    });

      function ans_display(obj){
          var arr=[];
          arr[1] = String(obj['Binary Representation']);
          arr[2] = String(obj['Two Complement']);
          arr[3] = String(obj['One Complement']);
          arr[4] = String(obj['Unsigned Value']);
          arr[5] = String(obj['Signed Value']);
          var tb = document.getElementById("usr_inp");
          for(var i=0,row; row = tb.rows[i];i++){
            for(var j=0,col;col=row.cells[j];j++){
              $(col).removeClass("ans_output");
              var val=col.innerHTML;
              //console.log(val);
              //console.log("j");
              if(val == arr[j]){
                //console.log("D");
                $(col).addClass("ans_output");
              }
            }
          }
      }
    


    function table_display(obj){
      console.log(obj['Binary Representation']);
      document.getElementById("r1").innerHTML = obj['Binary Representation'];
      document.getElementById("r2").innerHTML = obj['Two Complement'];
      document.getElementById("r3").innerHTML = obj['One Complement'];
      document.getElementById("r4").innerHTML = obj['Unsigned Value'];
      document.getElementById("r5").innerHTML = obj['Signed Value'];
      //ob = JSON.parse(obj);
      //console.log(JSON.parse(obj));
    }
    //console.log(jj);
      // function val(){
      //   //console.log("kanish")
      //   var xhttp = new XMLHttpRequest();
      //   xhttp.open("GET","http://localhost:5000/calculate",true);
      //   xhttp.send();
      //   xhttp.onreadystatechange = function(){
      //     //console.log("kanish")
      //     if(this.readyState == 4 && this.status == 200){
      //       document.getElementById("demo").innerHTML = this.responesText;
      //     }
      //   }
      // }
     
  </script>
  <div class="tab">
  <table id="usr_inp">
  <tr>
    <th colspan="2">Binary Rep</th>
    <th>2's Comp</th>
    <th>1's Comp</th>
    <th>Unsigned</th>
    <th>Signed</th>
    </tr>
    <tr id="df">
      <td>1</td>
      <td>0000</td>
      <td>0</td>
      <td>+0</td>
      <td>0</td>
      <td>+0</td>
    </tr>
    <tr>
      <td>2</td>
      <td>0001</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <td>3</td>
      <td>0010</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
      <td>2</td>
    </tr>
    <tr>
      <td>4</td>
      <td>0011</td>
      <td>3</td>
      <td>3</td>
      <td>3</td>
      <td>3</td>
    </tr>
    <tr>
      <td>5</td>
      <td>0100</td>
      <td>4</td>
      <td>4</td>
      <td>4</td>
      <td>4</td>
    </tr>
    <tr>
      <td>6</td>
      <td>0101</td>
      <td>5</td>
      <td>5</td>
      <td>5</td>
      <td>5</td>
    </tr>
    <tr>
      <td>7</td>
      <td>0110</td>
      <td>6</td>
      <td>6</td>
      <td>6</td>
      <td>6</td>
    </tr>
    <tr>
      <td>8</td>
      <td>0111</td>
      <td>7</td>
      <td>7</td>
      <td>7</td>
      <td>7</td>
    </tr>
    <tr>
      <td>9</td>
      <td>1000</td>
      <td>-8</td>
      <td>-7</td>
      <td>8</td>
      <td>-0</td>
    </tr>
    <tr>
      <td>10</td>
      <td>1001</td>
      <td>-7</td>
      <td>-6</td>
      <td>9</td>
      <td>-1</td>
    </tr>
    <tr>
      <td>11</td>
      <td>1010</td>
      <td>-6</td>
      <td>-5</td>
      <td>10</td>
      <td>-2</td>
    </tr>
    <tr>
      <td>12</td>
      <td>1011</td>
      <td>-5</td>
      <td>-4</td>
      <td>11</td>
      <td>-3</td>
    </tr>
    <tr>
      <td>13</td>
      <td>1100</td>
      <td>-4</td>
      <td>-3</td>
      <td>12</td>
      <td>-4</td>
    </tr>
    <tr>
      <td>14</td>
      <td>1101</td>
      <td>-3</td>
      <td>-2</td>
      <td>13</td>
      <td>-5</td>
    </tr>
    <tr>
      <td>15</td>
      <td>1110</td>
      <td>-2</td>
      <td>-1</td>
      <td>14</td>
      <td>-6</td>
    </tr>
    <tr>
      <td>16</td>
      <td>1111</td>
      <td>-1</td>
      <td>-0</td>
      <td>15</td>
      <td>-7</td>
    </tr>
  </table>
</div>
<button id="button_add">ADD</button>
<button id="button_reset">RESET</button>
<button>SWITCH TO 5 BIT</button>
<div class="result">
<table>
  <tr>
    <td>1</td>
    <td>Binary Rep</td>
    <td id="r1"></td>
  </tr>
  <tr>
    <td>2</td>
    <td>2's Comp</td>
    <td id="r2"></td>
  </tr>
  <tr>
    <td>3</td>
    <td>1's Comp</td>
    <td id="r3"></td>
  </tr>
  <tr>
    <td>4</td>
    <td>Unsigned</td>
    <td id="r4"></td>
  </tr>
  <tr>
    <td>5</td>
    <td>Signed</td>
    <td id="r5"></td>
  </tr>
</table>
</div>
  </body>
</html>
